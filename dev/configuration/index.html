<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Simulation Configuration · HEDGeOPF</title><meta name="title" content="Simulation Configuration · HEDGeOPF"/><meta property="og:title" content="Simulation Configuration · HEDGeOPF"/><meta property="twitter:title" content="Simulation Configuration · HEDGeOPF"/><meta name="description" content="Documentation for HEDGeOPF."/><meta property="og:description" content="Documentation for HEDGeOPF."/><meta property="twitter:description" content="Documentation for HEDGeOPF."/><meta property="og:url" content="https://mttb91.github.io/HEDGeOPF.jl/configuration/"/><meta property="twitter:url" content="https://mttb91.github.io/HEDGeOPF.jl/configuration/"/><link rel="canonical" href="https://mttb91.github.io/HEDGeOPF.jl/configuration/"/><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../search_index.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">HEDGeOPF</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li><span class="tocitem">Manual</span><ul><li><a class="tocitem" href="../quickstartguide/">Getting Started</a></li><li class="is-active"><a class="tocitem" href>Simulation Configuration</a><ul class="internal"><li><a class="tocitem" href="#CASE-options"><span><code>CASE</code> options</span></a></li><li><a class="tocitem" href="#SAMPLING-options"><span><code>SAMPLING</code> options</span></a></li><li><a class="tocitem" href="#PARALLEL-options"><span><code>PARALLEL</code> options</span></a></li><li><a class="tocitem" href="#MODEL-options"><span><code>MODEL</code> options</span></a></li><li><a class="tocitem" href="#PATH-options"><span><code>PATH</code> options</span></a></li><li><a class="tocitem" href="#SOLVER-options"><span><code>SOLVER</code> options</span></a></li></ul></li><li><a class="tocitem" href="../dataset/">Dataset Format</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Manual</a></li><li class="is-active"><a href>Simulation Configuration</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Simulation Configuration</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/mttb91/HEDGeOPF.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/mttb91/HEDGeOPF.jl/blob/main/docs/src/configuration.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Configuration-File"><a class="docs-heading-anchor" href="#Configuration-File">Configuration File</a><a id="Configuration-File-1"></a><a class="docs-heading-anchor-permalink" href="#Configuration-File" title="Permalink"></a></h1><p>The generation of an AC-OPF dataset is completely controlled and configured through an input YAML file of options <a href="https://github.com/mttb91/HEDGeOPF.jl/blob/main/examples/settings.yaml"><code>settings.yaml</code></a>. As exemplified below, these are organized into sections and are explained in detail hereafter.</p><pre><code class="language-yaml hljs">CASE:
    name : &quot;test&quot;
    grid : &quot;pglib_opf_case5_pjm.m&quot;
    ...

SAMPLING:
    delta_pd : 100.0
    ...</code></pre><h2 id="CASE-options"><a class="docs-heading-anchor" href="#CASE-options"><code>CASE</code> options</a><a id="CASE-options-1"></a><a class="docs-heading-anchor-permalink" href="#CASE-options" title="Permalink"></a></h2><p>This section defines global parameters that control how the AC-OPF dataset is generated.</p><table><tr><th style="text-align: right">Key</th><th style="text-align: center">Type</th><th style="text-align: right">Description</th></tr><tr><td style="text-align: right"><code>name</code></td><td style="text-align: center"><code>String</code></td><td style="text-align: right">Name of the folder where the dataset is saved</td></tr><tr><td style="text-align: right"><code>grid</code></td><td style="text-align: center"><code>String</code></td><td style="text-align: right">Full name of the power system grid (MATPOWER format <code>.m</code> file)</td></tr><tr><td style="text-align: right"><code>uid</code></td><td style="text-align: center"><code>Bool</code></td><td style="text-align: right">Whether to generate a unique identifier for each AC-OPF instance</td></tr><tr><td style="text-align: right"><code>append</code></td><td style="text-align: center"><code>Bool</code></td><td style="text-align: right">Whether to append new results to an existing dataset</td></tr><tr><td style="text-align: right"><code>baseseed</code></td><td style="text-align: center"><code>Int64</code></td><td style="text-align: right">Random number generator seed to control reproducibility</td></tr><tr><td style="text-align: right"><code>num_samples</code></td><td style="text-align: center"><code>Int64</code></td><td style="text-align: right">Total number of AC-OPF samples to generate</td></tr><tr><td style="text-align: right"><code>num_batches</code></td><td style="text-align: center"><code>Int64</code></td><td style="text-align: right">Number of batches in which the total samples are processed</td></tr><tr><td style="text-align: right"><code>num_items</code></td><td style="text-align: center"><code>Int64</code></td><td style="text-align: right">Number of load samples generated for a single total load active power level</td></tr></table><p>Few options deserve a more in-depth characterization.</p><h3 id="Behaviour-of-append"><a class="docs-heading-anchor" href="#Behaviour-of-append">Behaviour of <code>append</code></a><a id="Behaviour-of-append-1"></a><a class="docs-heading-anchor-permalink" href="#Behaviour-of-append" title="Permalink"></a></h3><p>If <code>append</code> is set to <code>false</code> and a dataset already exists under <code>name</code>, an error is raised to avoid overwriting it. If, instead, this option is <code>true</code>, new results are appended to the existing files. In this case, sampling resumes from the previously saved Random Number Generator (RNG) state, stored as <code>rng_state.bin</code> in the results folder. This file is automatically saved at the end of the dataset generation.</p><div class="admonition is-warning" id="Warning-109172a2e75fe48f"><header class="admonition-header">Warning<a class="admonition-anchor" href="#Warning-109172a2e75fe48f" title="Permalink"></a></header><div class="admonition-body"><p>If <code>append</code> is <code>true</code> and no RNG state file is available, <strong>remember to change the RNG seed</strong> <code>baseseed</code> to avoid regenerating the same dataset.</p></div></div><p>Appending to an existing dataset with <code>uid</code> set to <code>true</code> implies re-generating/overwriting the unique identifier mapping that is used for splitting. To avoid this behaviour (e.g., when generating a held-out dataset for NN testing), switch this option to <code>false</code>.</p><h3 id="Behaviour-of-num_batches"><a class="docs-heading-anchor" href="#Behaviour-of-num_batches">Behaviour of <code>num_batches</code></a><a id="Behaviour-of-num_batches-1"></a><a class="docs-heading-anchor-permalink" href="#Behaviour-of-num_batches" title="Permalink"></a></h3><p>By design, AC-OPF instances are obtained by first sampling all input load profiles, then solving the OPF problem for each. Clearly, this can significantly increase memory consumption when generating large datasets. Processing the total number of samples <code>num_samples</code> in batches mitigates this issue.</p><div class="admonition is-warning" id="Warning-abdecc91e0aa69c6"><header class="admonition-header">Warning<a class="admonition-anchor" href="#Warning-abdecc91e0aa69c6" title="Permalink"></a></header><div class="admonition-body"><p>However, <strong>the batch size should not be smaller than 2000-2500 samples</strong>. This is due to the fact that AC-OPF convergence is monitored for each total load active power sample. After processing the first batch, the region of sampling in total load active power is trimmed to exclude areas at the extrema of the distribution in which the AC-OPF never converges. If the number of batch samples is too small to sample the total active power region truly uniformly, regions that are feasible for the AC-OPF may be wrongly trimmed.</p></div></div><h3 id="Behaviour-of-num_items"><a class="docs-heading-anchor" href="#Behaviour-of-num_items">Behaviour of <code>num_items</code></a><a id="Behaviour-of-num_items-1"></a><a class="docs-heading-anchor-permalink" href="#Behaviour-of-num_items" title="Permalink"></a></h3><p>As detailed in the reference <a href="https://ieeexplore.ieee.org/abstract/document/10761586">publication</a>, load sampling is performed uniformly in terms of total active power. Specifically, each sample is generated by slicing the convex polytope around a certain value of total load active power and by sampling uniformly within this slice. The option <code>num_items</code> controls how many load samples are generated from a single polytope slice.</p><div class="admonition is-info" id="Note-da74ced697e6a02"><header class="admonition-header">Note<a class="admonition-anchor" href="#Note-da74ced697e6a02" title="Permalink"></a></header><div class="admonition-body"><p>Sampling from a polytope slice requires computing first its Chebyshev center. Setting <code>num_items</code> to 1 means determining as many Chebyshev centers as <code>num_samples</code>. This can be computationally demanding for large-scale power systems and/or for large datasets. Increasing <code>num_items</code> implies reducing the number of Chebyshev center computations.</p></div></div><h2 id="SAMPLING-options"><a class="docs-heading-anchor" href="#SAMPLING-options"><code>SAMPLING</code> options</a><a id="SAMPLING-options-1"></a><a class="docs-heading-anchor-permalink" href="#SAMPLING-options" title="Permalink"></a></h2><p>These control how the input sampling space is created. Currently, this consists solely in a convex polytope defined in terms of load active and reactive power variables.</p><table><tr><th style="text-align: right">Key</th><th style="text-align: center">Type</th><th style="text-align: center">Unit</th><th style="text-align: right">Description</th></tr><tr><td style="text-align: right"><code>delta_pd</code></td><td style="text-align: center"><code>Float64</code></td><td style="text-align: center">[%]</td><td style="text-align: right">Percentage variation in load active power around the nominal values</td></tr><tr><td style="text-align: right"><code>delta_qd</code></td><td style="text-align: center"><code>Float64</code></td><td style="text-align: center">[%]</td><td style="text-align: right">Percentage variation in load reactive power around the nominal values</td></tr><tr><td style="text-align: right"><code>delta_pf</code></td><td style="text-align: center"><code>Float64</code></td><td style="text-align: center">[1]</td><td style="text-align: right">Maximum reduction in power factor w.r.t. the nominal absolute value</td></tr><tr><td style="text-align: right"><code>max_pf</code></td><td style="text-align: center"><code>Float64</code></td><td style="text-align: center">[1]</td><td style="text-align: right">Maximum allowable load power factor</td></tr><tr><td style="text-align: right"><code>min_pf</code></td><td style="text-align: center"><code>Float64</code></td><td style="text-align: center">[1]</td><td style="text-align: right">Minimum allowable load power factor</td></tr></table><div class="admonition is-info" id="Note-57f5ab47d89db5f5"><header class="admonition-header">Note<a class="admonition-anchor" href="#Note-57f5ab47d89db5f5" title="Permalink"></a></header><div class="admonition-body"><p>The value <code>delta_pd</code> cannot exceed 100% since the active power of a load cannot be unrestricted in sign to preserve the sign relation between active and reactive power. To create a load with negative (positive) active power at a bus that already has a positive (negative) one, add a new load to the power system dictionary or .m file with negative (positive) nominal active power.</p></div></div><h2 id="PARALLEL-options"><a class="docs-heading-anchor" href="#PARALLEL-options"><code>PARALLEL</code> options</a><a id="PARALLEL-options-1"></a><a class="docs-heading-anchor-permalink" href="#PARALLEL-options" title="Permalink"></a></h2><p>The <code>PARALLEL</code> section controls distributed computing settings to be applied throughout the simulation.</p><table><tr><th style="text-align: right">Key</th><th style="text-align: center">Type</th><th style="text-align: center">Unit</th><th style="text-align: right">Description</th></tr><tr><td style="text-align: right"><code>cpu_ratio</code></td><td style="text-align: center"><code>Float64</code></td><td style="text-align: center">[%]</td><td style="text-align: right">Percentage of CPU threads to use w.r.t. <code>Sys.CPU_THREADS</code> count</td></tr></table><h2 id="MODEL-options"><a class="docs-heading-anchor" href="#MODEL-options"><code>MODEL</code> options</a><a id="MODEL-options-1"></a><a class="docs-heading-anchor-permalink" href="#MODEL-options" title="Permalink"></a></h2><p>These options are related to the modified PowerModels OPF model with slack variables for active and reactive load power.</p><table><tr><th style="text-align: right">Key</th><th style="text-align: center">Type</th><th style="text-align: center">Unit</th><th style="text-align: right">Description</th></tr><tr><td style="text-align: right"><code>duals</code></td><td style="text-align: center"><code>Bool</code></td><td style="text-align: center">–</td><td style="text-align: right">Whether to record dual values for every primal AC-OPF variable</td></tr><tr><td style="text-align: right"><code>voll</code></td><td style="text-align: center"><code>Float64</code></td><td style="text-align: center">[€/MWh]</td><td style="text-align: right">Value Of Lost Load</td></tr></table><p>When <code>duals</code> is set to <code>true</code>, by design HEDGeOPF automatically retrieves the dual values, if available, of every <code>JuMP.VariableRef</code> defined in the model and, yet, does not look for any <code>JuMP.ConstraintRef</code> object. This choice stems from the fact that PowerModels mainly employs anonymous, non-containerized JuMP constraints in model definition, making it difficult to retrieve their (dual) values when inspecting results.</p><div class="admonition is-warning" id="Warning-105d0f320d5b6f1a"><header class="admonition-header">Warning<a class="admonition-anchor" href="#Warning-105d0f320d5b6f1a" title="Permalink"></a></header><div class="admonition-body"><p>To record the dual value of branch apparent power, the OPF model is modified when <code>duals</code> is set to <code>true</code> by adding variables for the <strong>square of the branch apparent power</strong> at the from and to buses. When accessing and using the primal values for branch apparent power in the dataset results, the user should remember that they are squared.</p></div></div><h2 id="PATH-options"><a class="docs-heading-anchor" href="#PATH-options"><code>PATH</code> options</a><a id="PATH-options-1"></a><a class="docs-heading-anchor-permalink" href="#PATH-options" title="Permalink"></a></h2><p>These define input and output file paths relative to the one of the input configuration YAML file <code>basepath</code>. Overall, the absolute path of the grid file is <code>basepath/PATH.input/</code>. Similarly, the one of the dataset is composed as <code>basepath/PATH.output/CASE.grid/CASE.name/</code>.</p><table><tr><th style="text-align: right">Key</th><th style="text-align: center">Type</th><th style="text-align: right">Description</th></tr><tr><td style="text-align: right"><code>input</code></td><td style="text-align: center"><code>String</code></td><td style="text-align: right">Relative path to the folder containing the grid file</td></tr><tr><td style="text-align: right"><code>output</code></td><td style="text-align: center"><code>String</code></td><td style="text-align: right">Relative path to the folder where the AC-OPF dataset is saved</td></tr></table><h2 id="SOLVER-options"><a class="docs-heading-anchor" href="#SOLVER-options"><code>SOLVER</code> options</a><a id="SOLVER-options-1"></a><a class="docs-heading-anchor-permalink" href="#SOLVER-options" title="Permalink"></a></h2><p>The <code>SOLVER</code> section specifies the LP and NLP solvers employed in HEDGeOPF.</p><table><tr><th style="text-align: right">Key</th><th style="text-align: center">Type</th><th style="text-align: right">Description</th></tr><tr><td style="text-align: right"><code>lp</code></td><td style="text-align: center"><code>String</code></td><td style="text-align: right">Julia package name of linear programming solver</td></tr><tr><td style="text-align: right"><code>nlp</code></td><td style="text-align: center"><code>String</code></td><td style="text-align: right">Julia package name of nonlinear programming solver</td></tr><tr><td style="text-align: right"><code>lp_options</code></td><td style="text-align: center"><code>Pair</code></td><td style="text-align: right">Key-value pairs of options for the linear programming solver</td></tr><tr><td style="text-align: right"><code>nlp_options</code></td><td style="text-align: center"><code>Pair</code></td><td style="text-align: right">Key-value pairs of options for the nonlinear programming solver</td></tr></table><p>The following example shows how <code>lp_options</code> and <code>nlp_options</code> can be specified in the YAML file.</p><pre><code class="language-yaml hljs">SOLVER:
    lp          : &quot;HiGHS&quot;
    lp_options  :
        solver            : &quot;ipm&quot;  
    nlp         : &quot;Ipopt&quot;
    nlp_options :
        max_cpu_time      : 1000.0
        mumps_mem_percent : 10
        print_level       : 0</code></pre><p>HEDGeOPF is designed to be independent from the specific choice of LP and NLP solvers (as long as they support the type of variables and constraints used in the optimization models). The user should be able to control this simply by installing the relevant Julia packages and change the <code>SOLVER</code> section accordingly. The options of a specific solver, such as those of <a href="https://ergo-code.github.io/HiGHS/dev/options/definitions/">HiGHS</a> and <a href="https://coin-or.github.io/Ipopt/OPTIONS.html">Ipopt</a>, are typically available at the solver main documentation.</p><div class="admonition is-info" id="Note-d134fb9c6c626d13"><header class="admonition-header">Note<a class="admonition-anchor" href="#Note-d134fb9c6c626d13" title="Permalink"></a></header><div class="admonition-body"><p>Currently only HiGHS and Ipopt solvers have been tested with HEDGeOPF, with Ipopt being equipped with the default sequential MUMPS linear solver.</p></div></div></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../quickstartguide/">« Getting Started</a><a class="docs-footer-nextpage" href="../dataset/">Dataset Format »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.14.1 on <span class="colophon-date" title="Friday 29 August 2025 18:38">Friday 29 August 2025</span>. Using Julia version 1.10.10.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
